@inject IDialogService DialogService
@inject StorageService StorageService

@page "/gallery"

<MudGrid>
    @foreach (var picture in pictures)
    {
<MudItem xs="4" @onclick="@((e) => OpenVideo(picture))" Class="picture">
    <MudCard>
        <MudCardMedia Image="@picture.Image" Height="400" />
        <MudCardContent>
            <MudText Typo="Typo.h6">@picture.Author</MudText>
            <MudText Typo="Typo.h5">@picture.Text</MudText>
        </MudCardContent>

    </MudCard>
</MudItem>}
</MudGrid>

@code { 
    
    private IList<Picture> pictures = null;


    protected override void OnInitialized()
    {
        pictures = StorageService.GetPictures().ToList();
    }

    private async Task OpenVideo(Picture picture)
    {
        var parameters = new DialogParameters { ["picture"] = picture };

        var dialog = DialogService.Show<ShowVideoDialog>("Просмотр видео", parameters);
        var result = await dialog.Result;
    } 
 }